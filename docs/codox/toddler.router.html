<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>toddler.router documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>toddler</span></div></div></li><li class="depth-2 branch"><a href="toddler.app.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>app</span></div></a></li><li class="depth-2 branch"><a href="toddler.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="toddler.date.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>date</span></div></a></li><li class="depth-2 branch"><a href="toddler.dropdown.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dropdown</span></div></a></li><li class="depth-2 branch"><a href="toddler.i18n.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>i18n</span></div></a></li><li class="depth-2 branch"><a href="toddler.multiselect.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>multiselect</span></div></a></li><li class="depth-2 branch"><a href="toddler.notifications.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>notifications</span></div></a></li><li class="depth-2 branch"><a href="toddler.popup.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>popup</span></div></a></li><li class="depth-2 branch current"><a href="toddler.router.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>router</span></div></a></li><li class="depth-2 branch"><a href="toddler.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-2 branch"><a href="toddler.ui.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ui</span></div></a></li><li class="depth-2"><a href="toddler.window.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>window</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="toddler.router.html#var-*component-tree*"><div class="inner"><span>*component-tree*</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-Authorized"><div class="inner"><span>Authorized</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-clj-.3Equery"><div class="inner"><span>clj-&gt;query</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-component-.3Elocation"><div class="inner"><span>component-&gt;location</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-component-path"><div class="inner"><span>component-path</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-component-tree-zipper"><div class="inner"><span>component-tree-zipper</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-LandingPage"><div class="inner"><span>LandingPage</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-Link"><div class="inner"><span>Link</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-location-.3Emap"><div class="inner"><span>location-&gt;map</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-maybe-add-base"><div class="inner"><span>maybe-add-base</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-maybe-remove-base"><div class="inner"><span>maybe-remove-base</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-on-path.3F"><div class="inner"><span>on-path?</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-Protect"><div class="inner"><span>Protect</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-Provider"><div class="inner"><span>Provider</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-query-.3Eclj"><div class="inner"><span>query-&gt;clj</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-reducer"><div class="inner"><span>reducer</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-remove-component"><div class="inner"><span>remove-component</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-Rendered"><div class="inner"><span>Rendered</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-set-component"><div class="inner"><span>set-component</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-authorized.3F"><div class="inner"><span>use-authorized?</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-component-name"><div class="inner"><span>use-component-name</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-component-path"><div class="inner"><span>use-component-path</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-component-tree"><div class="inner"><span>use-component-tree</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-go-to"><div class="inner"><span>use-go-to</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-is-super.3F"><div class="inner"><span>use-is-super?</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-last-rendered"><div class="inner"><span>use-last-rendered</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-link"><div class="inner"><span>use-link</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-location"><div class="inner"><span>use-location</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-navigate"><div class="inner"><span>use-navigate</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-query"><div class="inner"><span>use-query</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-rendered.3F"><div class="inner"><span>use-rendered?</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-use-url-.3Ecomponents"><div class="inner"><span>use-url-&gt;components</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-wrap-authorized"><div class="inner"><span>wrap-authorized</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-wrap-link"><div class="inner"><span>wrap-link</span></div></a></li><li class="depth-1"><a href="toddler.router.html#var-wrap-rendered"><div class="inner"><span>wrap-rendered</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">toddler.router</h1><div class="doc"><div class="markdown"><p>Routing in toddler is focused on linking components in component tree. This component tree is built by <a href="toddler.router.html#var-use-link">use-link</a> hook or even better with <a href="toddler.router.html#var-wrap-link">wrap-link</a> function.</p>
<p>I.E.</p>
<pre><code class="language-clojure">(defnc HelloWorld
 {:wrap [(wrap-link
          :toddler.router/ROOT
          [{:id ::component-1
            :name "testing1"}
           {:id ::component-2
            :name "testing2"}])]}
 []
 ($ World {:message "Hey there!"}))
</code></pre>
<p>Other hooks and functions in this namespace are here to help you:</p>
<ul>
<li>Navigate component tree by sending user to component URL or adding parameters in browser URL that will have effect on your application state</li>
<li>Check if component is rendered by comparing path in routing tree to current browser location.</li>
<li>Check if user has rights to access some route by protecting routes with :roles and :permissions</li>
</ul>
<p>Ensure that user is redirected to landing page that is ment for him by using <a href="toddler.router.html#var-LandingPage">LandingPage</a> component</p>
</div></div><div class="public anchor" id="var-*component-tree*"><h3>*component-tree*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Component tree cache. This is where toddler router adds components and looks for routing information.</p>
</div></div></div><div class="public anchor" id="var-Authorized"><h3>Authorized</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Wrapper component that will render children if user is authorized to access component with :id in props</p>
</div></div></div><div class="public anchor" id="var-clj-.3Equery"><h3>clj-&gt;query</h3><div class="usage"><code>(clj-&gt;query data)</code></div><div class="doc"><div class="markdown"><p>Function will turn clojure map into URLSearchParams</p>
</div></div></div><div class="public anchor" id="var-component-.3Elocation"><h3>component-&gt;location</h3><div class="usage"><code>(component-&gt;location tree id)</code></div><div class="doc"><div class="markdown"><p>For given component tree and component id function will return zipper location if id is found.</p>
</div></div></div><div class="public anchor" id="var-component-path"><h3>component-path</h3><div class="usage"><code>(component-path tree id)</code></div><div class="doc"><div class="markdown"><p>Function will walk component tree to find component with id and when found will return all URL for that component.</p>
</div></div></div><div class="public anchor" id="var-component-tree-zipper"><h3>component-tree-zipper</h3><div class="usage"><code>(component-tree-zipper root)</code></div><div class="doc"><div class="markdown"><p>Function returns routing tree zipper</p>
</div></div></div><div class="public anchor" id="var-LandingPage"><h3>LandingPage</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Component that is active when routing location is at :url from props. If so, then this component will look for :landing <code>priority</code> in <code>*component-tree*</code> and sort all found components by priority.</p>
<p>Component with highest priority is chosen and its URL is computed and user agent is redirected to that URL.</p>
</div></div></div><div class="public anchor" id="var-Link"><h3>Link</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Component will link parrent with id and children with routing info. Check out <a href="toddler.router.html#var-use-link">use-link</a> hook to see how to structure children routing info.</p>
</div></div></div><div class="public anchor" id="var-location-.3Emap"><h3>location-&gt;map</h3><div class="usage"><code>(location-&gt;map location)</code></div><div class="doc"><div class="markdown"><p>For given js/Location object will return hashmap that contains: :pathname :hash :origin :search</p>
</div></div></div><div class="public anchor" id="var-maybe-add-base"><h3>maybe-add-base</h3><div class="usage"><code>(maybe-add-base base url)</code></div><div class="doc"><div class="markdown"><p>For given base and url will add base prefix if it exists to url. If base is nil than URL is returned</p>
</div></div></div><div class="public anchor" id="var-maybe-remove-base"><h3>maybe-remove-base</h3><div class="usage"><code>(maybe-remove-base base url)</code></div><div class="doc"><div class="markdown"><p>For given base and url will return URL without base. If base is nil function will return URL immediately</p>
</div></div></div><div class="public anchor" id="var-on-path.3F"><h3>on-path?</h3><div class="usage"><code>(on-path? tree path id)</code></div><div class="doc"><div class="markdown"><p>For given path and component id function will get component path and check if given path starts with component path.</p>
<p>If it does, than component is on path (true)</p>
</div></div></div><div class="public anchor" id="var-Protect"><h3>Protect</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Component will set protection contexts. Contexts like -permissions-, -roles- and -super-.</p>
<p>Use it as high as possible in your rendered app.</p>
</div></div></div><div class="public anchor" id="var-Provider"><h3>Provider</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Component will wrap js/window history functionalities for pushing poping, replacing history as well as navigation functions like back, forward and go.</p>
<p>This functions are provided in -navigation- context.</p>
<p>Another context is provided, and that is -router- context that is holds information about current location and component tree.</p>
<p>dispatch function to interact with -router- reducer is available through -dispatch- context.</p>
<p>base - is base that this Provider should include in its context. I.E. if your application is served under /some/url than you should specify that as base URL</p>
<pre><code>($ Provider
  {:base "my-app"}
  (d/div "Hello world"))</code></pre>
</div></div></div><div class="public anchor" id="var-query-.3Eclj"><h3>query-&gt;clj</h3><div class="usage"><code>(query-&gt;clj qp)</code></div><div class="doc"><div class="markdown"><p>Function will URLSearchParams into clojure map</p>
</div></div></div><div class="public anchor" id="var-reducer"><h3>reducer</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Multifunction where you can extend router functionality.</p>
<p>Default implementations exist for routing events of type:</p>
<ul>
<li>:location/change</li>
<li>::add-components</li>
</ul>
</div></div></div><div class="public anchor" id="var-remove-component"><h3>remove-component</h3><div class="usage"><code>(remove-component tree id)</code></div><div class="doc"><div class="markdown"><p>Function will remove component with id from component tree</p>
</div></div></div><div class="public anchor" id="var-Rendered"><h3>Rendered</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Component will render children if compnoent with :id from props is active (is contained in current URL)</p>
</div></div></div><div class="public anchor" id="var-set-component"><h3>set-component</h3><div class="usage"><code>(set-component tree {:keys [id parent], :as component})</code></div><div class="doc"><div class="markdown"><p>Function used to add component to component tree. For given component tree add component by specifying component id and component parent.</p>
</div></div></div><div class="public anchor" id="var-use-authorized.3F"><h3>use-authorized?</h3><div class="usage"><code>(use-authorized?)</code><code>(use-authorized? id)</code></div><div class="doc"><div class="markdown"><p>Hook that will return true if user is authorized to access component with “id”. If not will return false.</p>
<p>If ID is ommited, than authorized will check if user is superuser.</p>
</div></div></div><div class="public anchor" id="var-use-component-name"><h3>use-component-name</h3><div class="usage"><code>(use-component-name id)</code></div><div class="doc"><div class="markdown"><p>For given component id, hook will return component name.</p>
<p>If component :name was keyword it will try to translate that keyword.</p>
<p>If component :name is string it won’t translate. Just return that name</p>
<p>If component doesn’t have :name, hook will try to translate component id (only if component exists in component tree)</p>
</div></div></div><div class="public anchor" id="var-use-component-path"><h3>use-component-path</h3><div class="usage"><code>(use-component-path component)</code></div><div class="doc"><div class="markdown"><p>Hook will return url for <code>component[id]</code></p>
</div></div></div><div class="public anchor" id="var-use-component-tree"><h3>use-component-tree</h3><div class="usage"><code>(use-component-tree)</code></div><div class="doc"><div class="markdown"><p>Hook will return routing tree for -router- context</p>
</div></div></div><div class="public anchor" id="var-use-go-to"><h3>use-go-to</h3><div class="usage"><code>(use-go-to component)</code></div><div class="doc"><div class="markdown"><p>Hook will return function that will redirect browser to <code>component[id]</code>. Returned function can be called with parameters, and those parameters will be set in URL query.</p>
</div></div></div><div class="public anchor" id="var-use-is-super.3F"><h3>use-is-super?</h3><div class="usage"><code>(use-is-super?)</code></div><div class="doc"><div class="markdown"><p>Hook that will return true if user is in super roles or false if he isn’t</p>
</div></div></div><div class="public anchor" id="var-use-last-rendered"><h3>use-last-rendered</h3><div class="usage"><code>(use-last-rendered)</code></div><div class="doc"><div class="markdown"><p>Hook will return id of last rendered component</p>
</div></div></div><div class="public anchor" id="var-use-link"><h3>use-link</h3><div class="usage"><code>(use-link parent children)</code></div><div class="doc"><div class="markdown"><p>Hook will link parent with children components and add that to component tree for current -router- context. Children is expected to be map of:</p>
<ul>
<li>:id - Component ID. Should uniquely identify component</li>
<li>:name - Name of component. Can be used to resolve what to display. If :name is of type string than use-component-name hook will return that name.<br />
When keyword is used as name value use-component-name will try to resolve that keyword as translation in respect to locale in current app/locale context.</li>
<li>:hash - Optional hash that is appended to component URL</li>
<li>:segment - Segment of path that is conjoined to all parent segments. Used to resolve if component is rendered or not and in use-go-to hook to resolve what is target path if I wan’t to “go” to component with id</li>
<li>:roles - #{} with roles that are allowed to access this component</li>
<li>:permissions - #{} with permissions that are allowed to access this component</li>
<li>:landing - <code>[number]</code> to mark this component as possible landing site with number priority</li>
</ul>
<p>Linking should start with parent :toddler.router/ROOT component, as this component is parent to all other components</p>
</div></div></div><div class="public anchor" id="var-use-location"><h3>use-location</h3><div class="usage"><code>(use-location)</code></div><div class="doc"><div class="markdown"><p>Hook will return location from -router- context. Location will contain following keys:</p>
<pre><code class="language-clojure">{:pathname (.-pathname location)
 :hash (subs (.-hash location) 1)
 :origin (.-origin location)
 :search (.-search location)}
</code></pre>
</div></div></div><div class="public anchor" id="var-use-navigate"><h3>use-navigate</h3><div class="usage"><code>(use-navigate)</code></div><div class="doc"><div class="markdown"><p>Hook will return value in -navigation- context</p>
</div></div></div><div class="public anchor" id="var-use-query"><h3>use-query</h3><div class="usage"><code>(use-query)</code><code>(use-query action)</code></div><div class="doc"><div class="markdown"><p>Hook returns <code>[query-params query-setter]</code>. Query params are values that are pulled from URLSearchParams and query-setter is function that when called will set URLSearchParams</p>
</div></div></div><div class="public anchor" id="var-use-rendered.3F"><h3>use-rendered?</h3><div class="usage"><code>(use-rendered? id)</code></div><div class="doc"><div class="markdown"><p>Hook will return true if component with id is rendered, by checking if browser location contains component path.</p>
</div></div></div><div class="public anchor" id="var-use-url-.3Ecomponents"><h3>use-url-&gt;components</h3><div class="usage"><code>(use-url-&gt;components)</code></div><div class="doc"><div class="markdown"><p>Hook will return sequence of rendered components for current browser location</p>
</div></div></div><div class="public anchor" id="var-wrap-authorized"><h3>wrap-authorized</h3><div class="usage"><code>(wrap-authorized component)</code><code>(wrap-authorized component id)</code></div><div class="doc"><div class="markdown"><p>Wrapper that will use Authorized component to render children if user is authorized</p>
</div></div></div><div class="public anchor" id="var-wrap-link"><h3>wrap-link</h3><div class="usage"><code>(wrap-link component parent children)</code></div><div class="doc"><div class="markdown"><p>Utility function to link component with children. Will use <a href="toddler.router.html#var-Link">Link</a>.</p>
</div></div></div><div class="public anchor" id="var-wrap-rendered"><h3>wrap-rendered</h3><div class="usage"><code>(wrap-rendered component)</code><code>(wrap-rendered component id)</code></div><div class="doc"><div class="markdown"><p>Wrapper that will use Rendered component to render children if navigation is at component with id</p>
</div></div></div></div></body></html>